<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.fly.sky.repository.UserFlightRepository">

    <resultMap id="BaseResultMap" type="com.fly.sky.domain.UserFlight">
        <result column="id" jdbcType="INTEGER" property="id" />
        <result column="flight_no" jdbcType="VARCHAR" property="flightNo" />
        <result column="flight_name_start" jdbcType="VARCHAR" property="flightNameStart" />
        <result column="flight_name_end" jdbcType="VARCHAR" property="flightNameEnd" />
        <result column="flight_date" jdbcType="VARCHAR" property="flightDate" />
        <result column="create_time" jdbcType="TIMESTAMP" property="createTime" />
        <result column="openid" jdbcType="VARCHAR" property="openid" />
        <result column="airlines_code" jdbcType="VARCHAR" property="airlinesCode" />
        <result column="status" jdbcType="INTEGER" property="status" />
    </resultMap>

    <select id="findUserFlightsByCondition"
            parameterType="com.fly.sky.condition.UserFlightCondition"
            resultType="com.fly.sky.domain.UserFlight">
        select id as id,flight_no as flightNo , flight_name_start as flightNameStart ,airlines_code as airlinesCode,
        flight_date as flightDate,create_time as createTime from userflight WHERE 1=1 and status=0
        <if test="openid != null and openid != '' ">
            and  openid = #{openid,jdbcType=VARCHAR}
        </if>
    </select>



    <insert id="insertUserFlights" parameterType="com.fly.sky.condition.UserFlightCondition" >
       insert into userflight(flight_no, flight_name_start,flight_name_end,
        airlines_code,flight_date,status,create_time,openid )
        values(
        #{flightNo}, #{flightNameStart}, #{flightNameEnd},
        #{airlinesCode}, #{flightDate} ,0,sysdate(),#{openid}
        )
    </insert>



</mapper>
